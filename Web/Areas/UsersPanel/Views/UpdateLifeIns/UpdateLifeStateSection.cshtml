@model Core.DTOs.SiteGeneric.LifeIns.UpdateLifeInsStateStepVM
<div class="container-fluid">
    <div class="row">
        <form asp-area="UsersPanel" asp-controller="UpdateLifeIns" asp-action="UpdateLifeStateSection" enctype="multipart/form-data"
              data-ajax="true"
              data-ajax-method="POST"
              data-ajax-mode="replace"
              data-ajax-update="#lifeState">
            @Html.AntiForgeryToken()
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <input type="hidden" asp-for="guid" />
            <input type="hidden" asp-for="StrInsurerNCImage" />
            <input type="hidden" asp-for="StrInsuredNCImage" />

            <div class="col-md-6 col-xs-12">
                <div class="form-group">
                    <label asp-for="SellerCode" class="control-label"></label>
                    <input asp-for="SellerCode" class="form-control" />
                    <span asp-validation-for="SellerCode" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="InsurerName" class="control-label"></label>
                    <input asp-for="InsurerName" class="form-control" />
                    <span asp-validation-for="InsurerName" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="InsurerFamily" class="control-label"></label>
                    <input asp-for="InsurerFamily" class="form-control" />
                    <span asp-validation-for="InsurerFamily" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="InsurerCellphone" class="control-label"></label>
                    <input asp-for="InsurerCellphone" class="form-control" />
                    <span asp-validation-for="InsurerCellphone" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="InsurerNCImage" class="control-label"></label><img width="30" height="30" class="float-md-left zoom" src="~/images/Ins/life/@Model.StrInsurerNCImage" />
                    <input asp-for="InsurerNCImage" type="file" class="form-control" />
                    <span asp-validation-for="InsurerNCImage" class="text-danger"></span>
                </div>
            </div>
            <div class="col-md-6 col-xs-12">
                <div class="form-group">
                    <label asp-for="InsuredName" class="control-label"></label>
                    <input asp-for="InsuredName" class="form-control" />
                    <span asp-validation-for="InsuredName" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="InsuredFamily" class="control-label"></label>
                    <input asp-for="InsuredFamily" class="form-control" />
                    <span asp-validation-for="InsuredFamily" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="InsuredNCImage" class="control-label"></label><img width="30" height="30" class="float-md-left zoom" src="~/images/Ins/life/@Model.StrInsuredNCImage" />
                    <input asp-for="InsuredNCImage" type="file" class="form-control" />
                    <span asp-validation-for="InsuredNCImage" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="PlanId" class="control-label"></label>
                    <select asp-for="PlanId" onchange="GetPaymentsByFetch()" class="form-control">
                        <option value="">لطفا طرح را انتخاب کنید</option>
                        @foreach (var pl in Model.Plans)
                        {
                            <option value="@pl.Id">@pl.Title</option>
                        }
                    </select>
                </div>
                <div class="form-group" id="payments">
                    <label asp-for="PeymentMethodId" class="control-label"></label>
                    <select asp-for="PeymentMethodId" class="form-control">
                        <option value="">لطفا روش پرداخت را انتخاب کنید</option>
                        @foreach (var pl in Model.PaymentMethods)
                        {
                            <option value="@pl.Id">@pl.Title</option>
                        }
                    </select>
                </div>

            </div>

            <div class="form-group">
                <input type="submit" value="ویرایش" class="btn btn-primary col-xs-12" />
            </div>

        </form>

    </div>
</div>
<input type="hidden" id="inpMess" value="@TempData["res"]" />


<script src="~/jquery-ajax-unobtrusive/jquery.unobtrusive-ajax.min.js"></script>
<script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
<script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>
<script>
    var mmodal = document.getElementById("adminmodal");
    if (mmodal !== null && mmodal !== "undefined")
    {
        var x = document.getElementById("inpMess").value;
        if (x === "yes")
        {
            Swal.fire({
                toast: true,
                icon: "success",
                title: "عملیات با موفقیت انجام شد",
                showConfirmButton: false,
                timer: 2000,
                timerProgressBar: true,
                didOpen: (toast) => {
                    toast.addEventListener('mouseenter', Swal.stopTimer)
                    toast.addEventListener('mouseleave', Swal.resumeTimer)
                }
            });
            
            document.getElementById("close-modal").click();
        }
       
    }
    
</script>